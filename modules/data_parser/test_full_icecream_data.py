#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
휘광님 제공 저당 아이스크림 전체 데이터 테스트
"""

from universal_smart_parser import UniversalSmartParser

# 휘광님이 제공한 전체 저당 아이스크림 데이터
full_data = """
라라스윗 바닐라 저당콘 아이스크림 (냉동), 1개, 4개입, 160ml
라라스윗 바닐라 저당콘 아이스크림 (냉동), 1개, 4개입, 160ml
15%10,900원
9,260원
로켓배송
(10ml당 145원)
내일(목) 새벽 도착 보장
5
(602)
최대 463원 적립
최대 463원 적립
AD
라라스윗 저당 딸기 생요거트바 (냉동), 1개, 6개입, 70ml
라라스윗 저당 딸기 생요거트바 (냉동), 1개, 6개입, 70ml
10%7,900원
7,110원
로켓배송
(10ml당 169원)
내일(목) 새벽 도착 보장
4.5
(1239)
최대 355원 적립
최대 355원 적립
1
라라스윗 저당 복숭아 생요거트바 (냉동), 1개, 6개입, 70ml
라라스윗 저당 복숭아 생요거트바 (냉동), 1개, 6개입, 70ml
7,900원
로켓배송
(10ml당 188원)
내일(목) 새벽 도착 보장
5
(41)
최대 395원 적립
최대 395원 적립
2
롯데웰푸드 티코 밀크초코 저당 (냉동), 15개, 1개입, 34ml
롯데웰푸드 티코 밀크초코 저당 (냉동), 15개, 1개입, 34ml
10%8,000원
7,200원
로켓배송
(10ml당 141원)
내일(목) 새벽 도착 보장
5
(232)
최대 360원 적립
최대 360원 적립
3
유키모찌 저당 초코바 피넛버터 (냉동), 1개, 4개입, 90ml
유키모찌 저당 초코바 피넛버터 (냉동), 1개, 4개입, 90ml
9,900원
로켓배송
(10ml당 275원)
내일(목) 새벽 도착 보장
2
(1)
최대 495원 적립
최대 495원 적립
AD
유키모찌 저당 모나카 솔티드 카라멜 (냉동), 1개, 4개입, 140ml
유키모찌 저당 모나카 솔티드 카라멜 (냉동), 1개, 4개입, 140ml
2%9,100원
8,900원
로켓배송
(10ml당 159원)
내일(목) 새벽 도착 보장
5
(86)
최대 445원 적립
최대 445원 적립
AD
라라스윗 저당 멜론바 6개입 (냉동), 70ml, 1개
라라스윗 저당 멜론바 6개입 (냉동), 70ml, 1개
10%7,900원
7,110원
로켓배송
(10ml당 169원)
내일(목) 새벽 도착 보장
4.5
(1678)
최대 355원 적립
최대 355원 적립
4
빙그레 생귤탱귤 제로 감귤 막대 아이스크림 (냉동), 70ml, 1개입, 8개
빙그레 생귤탱귤 제로 감귤 막대 아이스크림 (냉동), 70ml, 1개입, 8개
19%5,960원
4,800원
로켓배송
(10ml당 86원)
내일(목) 새벽 도착 보장
5
(1800)
최대 240원 적립
최대 240원 적립
5
곰곰 310Kcal 딸기 아이스밀크 (냉동), 474ml, 1개입, 1개
곰곰 310Kcal 딸기 아이스밀크 (냉동), 474ml, 1개입, 1개
29%6,990원
4,950원
로켓배송
(10ml당 104원)
내일(목) 새벽 도착 보장
4.5
(69)
최대 248원 적립
최대 248원 적립
AD
라라스윗 저당 바닐라 초코바 (냉동), 90ml, 4개입, 1개
라라스윗 저당 바닐라 초코바 (냉동), 90ml, 4개입, 1개
15%9,400원
7,990원
로켓배송
(10ml당 222원)
내일(목) 새벽 도착 보장
5
(5569)
최대 400원 적립
최대 400원 적립
6
라라스윗 팥 모나카 아이스밀크 (냉동), 140ml, 4개입, 1개
라라스윗 팥 모나카 아이스밀크 (냉동), 140ml, 4개입, 1개
15%9,400원
7,990원
로켓배송
(10ml당 143원)
내일(목) 새벽 도착 보장
4.5
(1304)
최대 400원 적립
최대 400원 적립
AD
라라스윗 치즈케이크 아이스밀크 (냉동), 474ml, 1개입, 1개
라라스윗 치즈케이크 아이스밀크 (냉동), 474ml, 1개입, 1개
44%11,300원
6,320원
로켓배송
(10ml당 133원)
내일(목) 새벽 도착 보장
5
(497)
최대 316원 적립
최대 316원 적립
7
빙그레 더위사냥 제로 디카페인 커피 (냉동), 140ml, 1개입, 6개
쿠팡추천
빙그레 더위사냥 제로 디카페인 커피 (냉동), 140ml, 1개입, 6개
6,200원
로켓배송
(10ml당 74원)
내일(목) 새벽 도착 보장
5
(2105)
최대 310원 적립
최대 310원 적립
8
라라스윗 저당 딥초코 쭈쭈바 (냉동), 1개, 6개입, 130ml
라라스윗 저당 딥초코 쭈쭈바 (냉동), 1개, 6개입, 130ml
7,900원
로켓배송
(10ml당 101원)
내일(목) 새벽 도착 보장
5
(15)
최대 395원 적립
최대 395원 적립
9
라라스윗 저당 팥 모니카 16개
무료배송
라라스윗 저당 팥 모니카 16개
52,650원
7/12(토) 도착 예정
최대 2,633원 적립
최대 2,633원 적립
10
"""

def main():
    """전체 저당 아이스크림 데이터 테스트"""
    parser = UniversalSmartParser()
    
    print("🍦 저당 아이스크림 전체 데이터 테스트")
    print("📋 휘광님 제공 데이터 완전 분석...")
    
    # 파싱 실행
    products = parser.parse_coupang_data(full_data, category='lowsugar_icecream')
    
    if products:
        # 결과 미리보기
        parser.preview_results(products)
        
        # JSON 저장
        filepath = parser.save_to_json(products)
        print(f"\n✅ 저당 아이스크림 완전 파싱 완료! 파일: {filepath}")
        print("🎯 광고 필터링 + 가격순 정렬 완료!")
        print("📋 WhatToEat 룰렛에 저당 아이스크림 카테고리 추가 준비 완료!")
        print("🔥 휘광님이 원하는 대로 계속 재사용 가능한 시스템입니다!")
        
        # 통계 정보
        print(f"\n📊 파싱 통계:")
        print(f"   • 총 제품 수: {len(products)}개")
        print(f"   • 가격 범위: {min(p['price_numeric'] for p in products):,}원 ~ {max(p['price_numeric'] for p in products):,}원")
        print(f"   • 할인 제품: {len([p for p in products if p.get('discount')])}개")
        print(f"   • 평균 평점: {sum(float(p['rating']) for p in products) / len(products):.1f}점")
        
    else:
        print("\n😅 파싱할 수 있는 데이터를 찾지 못했습니다.")

if __name__ == "__main__":
    main()